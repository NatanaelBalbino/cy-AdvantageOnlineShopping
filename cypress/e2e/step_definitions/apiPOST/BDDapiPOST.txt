import { Given, When, Then, And } from 'cypress-cucumber-preprocessor/steps'

const userId = 191222447;
const source = 'testeAPI';
const color = 'black';
const productId = 6;
const authToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJ3d3cuYWR2YW50YWdlb25saW5lc2hvcHBpbmcuY29tIiwidXNlcklkIjoxOTEyMjI0NDcsInN1YiI6InN0cmluZyIsInJvbGUiOiJBRE1JTiJ9.28Ezg3D_namYndEPhj7ClbEdIwxGB-PVSwJWbZ-Dn9M';
const queryParams = {
    userId,
    source,
    color,
    product_id: productId 
}

Given("que estou fazendo o teste", () => {
    cy.fixture('laptophp.jpg', 'base64').then( fileContent => {
        const blob = Cypress.Blob.base64StringToBlob(fileContent, 'image/jpg');
        const formData = new FormData();
        formData.append('image', blob, 'laptophp.jpg');
        cy.log('File:', fileContent);

    // cy.request({
    //     method: 'POST',
    //     url: `https://www.advantageonlineshopping.com/catalog/api/v1/product/image/${userId}/${source}/${color}/${productId}`,
    //     qs: {queryParams, formData,},
    //     form: true,
    //     headers: {
    //         'Authorization': `Bearer ${authToken}`,
    //         'Content-Type': 'multipart/form-data',
    //    }
    // }).then((response) => {
    //     expect(response.status).to.eq(200);
    //     cy.log('Response Body:', JSON.stringify(response.body, null, 2)); // Imprime o corpo da resposta
    //     //   expect(response.body).to.not.be.empty;
    //     //   expect(response.body).to.be.an('object');
    // });
    });
})